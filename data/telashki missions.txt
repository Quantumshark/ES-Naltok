# Copyright (c) 2023 by Alex di Giovanni
#
# Endless Sky is free software: you can redistribute it and/or modify it under the
# terms of the GNU General Public License as published by the Free Software
# Foundation, either version 3 of the License, or (at your option) any later version.
#
# Endless Sky is distributed in the hope that it will be useful, but WITHOUT ANY
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE.  See the GNU General Public License for more details.

mission "Star-Worm Research 1"
	description `Travel to the Norelon system and record the activity of the local "Star-Worms"`
	to offer
		has "First Contact: Naltok (Telashki): offered"
	source Kutora
	waypoint Norelon
	destination Kutora
	on offer
		conversation
			`As you walk through the spaceport on <origin>, a Naltok wearing the dark-green uniform of the Ministry of Alien Life waves at you from across the room.`
			choice
				`	(Walk over to them.)`
					goto talk
				`	(Pretend not to see them.)`
			`	After waving at you enthusiastically for a couple more seconds, the Naltok stands up and walks over to you.`
			label talk
			`	As you get closer, you see that their uniform has some bright blue markings, and a small logo of a bacterial cell on each shoulder.`
			`	"You are our new human friend, yes? We could use your help with something."`
			choice
				`	"Certainly, tell me more!"`
					goto eager
				`	"That depends, what do you need?"`
					goto cautious
				`	"Will I be paid for this?"`
				`	"I am too busy to do anything right now, sorry."`
					defer
			`	The Naltok makes a strange, guttural sound, perhaps their equivalent of laughter. "The Alphas told us as much about you humans, that the only thing that interests you is money. Yes, we will pay you."`
				goto proposal
			label eager
			`	"You seem very eager, perhaps one day you will wish to settle down here and join the Ministry!"`
			label cautious
			`	"Do not worry, you may listen to the whole proposal before deciding."`
			label proposal
			`	"Here is the situation: For many years now, we have been studying an interesting phenomenon that occurs in the Norelon system. Our name for it would translate best into your language as 'Star-Worms', but essentially they are tiny flashes of light, visible from a ship's window. We have been aware for a long time that at some point, we will have to relocate this phenomenon to another star system, as the imminent supernova in Vokegol likely poses a great threat to it."`
			choice
				`	"Wait, what's this about a supernova?"`
				`	(Let them continue)`
					goto continuing
			`	"Have none of us told you about Vokegol yet? I am not an astrophysicist, so I cannot go into much detail, but the short explanation is that the stars you see in that system are continually spiralling inwards, and when they collide they will erupt in a supernova explosion." They pause for a second, seeing your worried expression, and then continue. "Do not worry, there is no risk of anything happening in the next hundred years! This is simply a long-term plan."`
			label continuing
			`	"Anyways, before that system goes supernova, we need someone to help us transfer these Star-Worms to another system. Unfortunately, the recent war with the Xochira has made sending unarmed ships there too risky, so instead we would like to enlist your help. For now though, we just want you to visit the Norelon system and collect some simple data, checking whether the Star-Worms have any unexpected interactions with your ship, then return here."`
			choice
				`	"Sure, sounds like a plan!"`
					accept
				`	"I'll do it."`
					accept
				`	"I can't help you with that right now, but perhaps later?"`
					set "deferred norelon recon"
					decline
				`	"I'm not interested in working with the Star-Worms or with your Ministry. I'm out."`
					decline
	on enter Norelon
		dialog `Sure enough, your sensors detect something in this system, and you can see a number of tiny light sources all around you. After a few seconds, you finish collecting the requested data.`
	on complete
		payment 50000
		dialog
			`The Naltok from earlier is waiting for you as you land, and hands you 50,000 credits in exchange for your data.`
			`	"Give me a few minutes to go over this, then meet me in the spaceport whenever you are interested in continuing with this work."`

mission "Star-Worm Research 1 (deferred)"
	landing
	minor
	description `Travel to the Norelon system and record the activity of the local "Star-Worms"`
	to offer
		has "First Contact: Naltok (Telashki): offered"
		has "deferred norelon recon"
	source Kutora
	waypoint Norelon
	destination Kutora
	on offer
		conversation
			`	The Naltok you met here before is waiting for you as you land. "So, are you ready to help with my proposal?"`
			choice
				`	"Yes, I am ready now."`
					accept
				`	"No, not right now, sorry."`
					defer
				`	"No, and please stop asking."`
					decline	on enter Norelon
		dialog `Sure enough, your sensors detect something in this system, and you can see a number of tiny light sources all around you. After a few seconds, you finish collecting the requested data.`
	on complete
		payment 50000
		dialog
			`The Naltok from earlier is waiting for you as you land, and hands you 50,000 credits in exchange for your data.`
			`	"Give me a few minutes to go over this, then meet me in the spaceport whenever you are interested in continuing with this work."`
	
	