# Copyright (c) 2022 by Alex di Giovanni
#
# Endless Sky is free software: you can redistribute it and/or modify it under the
# terms of the GNU General Public License as published by the Free Software
# Foundation, either version 3 of the License, or (at your option) any later version.
#
# Endless Sky is distributed in the hope that it will be useful, but WITHOUT ANY
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE.  See the GNU General Public License for more details.

mission "First Contact: Naltok (Telashki)"
	landing
	to offer
		not "First Contact: Naltok (Xochira): offered"
	invisible
	source
		government "Telashki"
	on offer
		conversation
			`This planet is populated by a species of aliens that remind you of giant newts, slightly shorter than you and with large eyes and dark, rubbery skin. They move languidly through the spaceport, which appears to be flooded with around a foot of water, and several of them come in to watch your ship as you land.`
			`	Several of them have gathered in a crowd outside your ship's door, waiting for you to leave. You notice that two of them, standing near the back of the crowd, are substantially larger than the others and posess an additional pair of arms.`
			`	As you cautiously open your ship's hatch, the crowd of aliens opens slightly. An individual wearing a tight, dark green outfit made from some kind of plastic-like material steps forward, pauses briefly, then begins speaking to you.`
			`	"Greetings, visitor. You are human, yes?"`
			choice
				`	"Yes, I am human."`
					goto naltok
				`	"Wait, how do you know my language?"`
			`	"Don't worry too much about that. But I will assume from the fact that you responded in the human language when questioned in it that you are indeed human."`
			label naltok
			`	The alien steps back slightly and gestures around. "We are the Naltok. These planets are under the control of the Telashki, and we will welcome you so long as you do not cause trouble."`
			choice
				`	"Why was I attacked when I entered your space?"`
					goto xochira
				`	"If you are all Naltok, who are the Telashki?"`
			`	"My apologies, I may have explained that poorly. The Telashki are the government of this region - equivalent to your 'Republic'. Naltok is the name of our species."`
			label xochira
			`	"You must have entered our space from the south, yes? If so, you no doubt encountered the Xochira. They are xenophobes and technophobes who rejected our leadership, and now attack anyone attempting to enter or leave Naltok space. If you do not wish to face them again, you are welcome to stay here in our space. Alternatively, if you wish to leave, we are happy to sell you weapons and warships to aid you on your journey back."`
			`	As the Naltok continues talking, the crowd behind them parts to allow a taller, more humanlike individual through. As they approach, you see brief glimpses of green skin, and before you have a chance to respond you are face to face with an Alpha. She is slightly taller than you, with short hair, and is wearing waterproof trousers and a pair of wellington boots.`
			choice
				`	(Draw my weapon.)`
					goto weapon
				`	(Wait for them to act.)`
					goto waiting
				`	"Hello, what brings you here?"`
			`	The Alpha seems briefly surprised, perhaps not expecting you to strike up a conversation. "Same as you, I believe. I travelled here with a Jump Drive, then found my exit blocked by the Xochira and their 'Archerfish'. Figured I'd be better off staying here than getting myself killed trying to escape. Now that we're stuck here together, what's your name?"`
			goto name
			label waiting
			`	After a few seconds of silent stares, the Naltok begins talking with a distinct enthusiasm in a clear attempt to defuse the situation before things go downhill. "Hey, I realise we don't even know each others' names." They look back and forth expectantly between you and the Alpha.`
			goto name
			label weapon
			`	The Alpha knocks your weapon out of your hand with laughable ease, then leans in closer and whispers to you. "It doesn't surprise me that that's your initial response, but I urge you to reconsider. Right now, we're both prisoners of the Xochira, whether we like it or not. You've nothing to gain by starting a fight."`
			choice
				`	"I suppose you are right."`
					goto waiting
				`	(Return to my ship and take off)`
			`	You never moved far from the hatch of your ship, so there is no time for anyone to stop you. As you ascend through the atmosphere, your sensors note that your ship is receiving fire from small-caliber weaponry. It appears you are no longer welcome here.`
				launch
			label name
			choice
				`	"My name is <first> <last>"`
					goto tellname
				`	I would prefer not to tell you my name`
			`	The Alpha speaks up first. "There's no need to be so uncooperative; we truly mean you no harm. I understand that the years of propaganda you must have been subjected to back in Human space are not easy to overcome, but I must ask that you try to have an open mind. My name is Izarna."`
			`	The Naltok joins in before you can respond "My name is Choshkal."
	on enter
		"reputation: Telashki" <?= -10
		fail


#mission "First Contact: Naltok (Xochira)"
#	boarding
#	to offer
#		not "First Contact: Naltok (Telashki): offered"
#	source
#		government "Xochira"
#	passengers 1
#	destination
#		government "Xochira"
#	clearance
#	on offer
#		conversation
#			`As you blast open the airlock of the mysterious ship that had been attacking you, you find yourself face to face with an alien and knee-deep in water. The alien resembles a giant newt, with dark, rubbery skin and large eyes, and is slightly shorter than you. The water is lukewarm, and quickly washes over your lower legs.`
#			`	The alien immediately reaches down to its waist, where you see two pistols holstered.`
#			choice
#				`	(Raise my hands.)`
#				`	(Draw my gun.)`
#					goto threaten
#				`	(Draw my gun and fire.)`
#					goto murder
#			`	The alien draws both its pistols and points them at you, but does not fire. After a few seconds, the alien hesitantly lowers first one, then the other`	
#			choice
#				`	"Hello? Can you understand me?"`
#				`	(Say nothing.)`
#					goto silencep
#			`	The alien appears not to understand you. It begins speaking in its own language, then stops after realising you do not understand it.`
#				goto siren
#			label silencep
#			`	The alien stares at you hesitantly, evidently waiting for you to make a move.`
#				goto siren
#			label threaten
#			`	The alien draws both its pistols and points them at you, but does not fire. You both stand in silence, weapons pointed towards each other.`
#			choice
#				`	"Hello? Can you understand me?"`
#				`	(Say nothing.)`
#					goto silence
#			`	The alien does not appear to understand you, but begins speaking in its own language. When it sees that you do not understand, it stops and continues staring.`
#				goto siren
#			label silence
#			`	You and the alien continue holding each other at gunpoint for nearly a minute. The air on the ship is excessively damp, and you realise that neither you nor the alien have blinked.`
#			label siren
#			`	Suddenly, a light on the ceiling begins to flash in a piercing green colour, and a loud unpleasant sound begins playing from a small device on the ceiling.`
#			`	The alien stands motionless for a couple of seconds, then drops its weapons, raises its hands and slowly steps towards you.`
#			choice
#				`	(Do nothing.)`
#				`	(Shoot it.)`
#					goto murder
#			`	The alien walks past you, towards your ship. Moments later, an alarm from your ship indicates that there is a significant radiation leak on the alien ship.`
#			`	You quickly run back to your ship and take off, moments before the alien ship is ripped apart by a nuclear explosion.`
#				launch
#			label murder
#			`	You reach for your gun and pull the trigger. The alien stumbles and falls down, apparently dead.` 
#			`	Perhaps things could have ended differently, but any chance of peace between you and these aliens is now gone. All that remains now is to continue with your plans to either loot or steal this ship.`
#				decline
#	on accept
#		conversation
#			`As soon as it is on your ship, the alien takes some kind of device from its pocket and begins speaking into it quickly. After a few moments, your sensors inform you that the other ships in the system have apparently stopped attacking you.`
#			`	The alien walks over to your starmap and points at itself, then at a particular nearby system. It seems as though it wishes to be taken there.`
#		"reputation: Xochira" >?= 1
#	on fail
#		"reputation: Xochira" <?= -1
#	on complete
#		conversation
#			``
		

#mission "Second Contact: Naltok (Telashki)"
#	landing
#	to offer
#		not "First Contact: Naltok (Telashki): offered"
#		has "First Contact: Naltok (Xochira): offered"
#	invisible
#	source
#		government "Telashki"
#	on offer
#		conversation
#			``
	
#mission "Second Contact: Naltok (Xochira)"
#	boarding
#	to offer
#		has "First Contact: Naltok (Telashki): offered"
#		not "First Contact: Naltok (Xochira): offered"
#	invisible
#	source
#		government "Xochira"
#	on offer
#		conversation
#			``
